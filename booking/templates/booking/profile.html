<!-- booking/templates/booking/profile.html -->
{% extends 'booking/base.html' %}
{% block content %}
<h2>Welcome, {{ user.username }}!</h2>

<h3>My Fitness Goals</h3>
<p>{{ user.userprofile.get_fitness_goal_display }}</p>
<a href="{% url 'set_goal' %}">
    <button>Change Goal</button>
</a>

<h3>My Sports Data</h3>
<div style="display: flex; justify-content: space-between; margin: 20px 0;">
    <div style="border: 2px solid #333; padding: 15px; text-align: center; flex: 1; margin: 0 10px; border-radius: 8px;">
        <h4 style="margin: 0 0 10px 0; font-size: 14px;">Total exercise time</h4>
        <div style="font-size: 24px; font-weight: bold;">{{ sports_data.total_exercise_time }}min</div>
    </div>
    <div style="border: 2px solid #333; padding: 15px; text-align: center; flex: 1; margin: 0 10px; border-radius: 8px;">
        <h4 style="margin: 0 0 10px 0; font-size: 14px;">Physical improvement training</h4>
        <div style="font-size: 24px; font-weight: bold;">{{ sports_data.physical_improvement_time }}min</div>
    </div>
    <div style="border: 2px solid #333; padding: 15px; text-align: center; flex: 1; margin: 0 10px; border-radius: 8px;">
        <h4 style="margin: 0 0 10px 0; font-size: 14px;">Strength training</h4>
        <div style="font-size: 24px; font-weight: bold;">{{ sports_data.strength_training_time }}min</div>
    </div>
</div>

<h3>AI Recommended Courses</h3>
<div style="margin-bottom: 16px; font-size: 1.1em; color: #333;">
    <strong>Recommendation Reason: </strong>{{ ai_summary }}
</div>
<div style="display: flex; flex-wrap: wrap; gap: 24px;">
    {% for course in ai_courses %}
    <div style="border: 2px solid #333; border-radius: 10px; padding: 18px; width: 350px; background: #fafbfc; box-shadow: 2px 2px 8px #eee;">
        <h4 style="margin-bottom: 8px; font-size: 1.2em;">{{ course.name }}</h4>
        {% if course.image %}
        <img src="{{ course.image.url }}" alt="{{ course.name }}" style="max-width: 100%; height: 160px; object-fit: cover; border-radius: 8px; margin-bottom: 10px;" />
        {% endif %}
        <p><strong>Description:</strong> {{ course.description }}</p>
        <p><strong>Date:</strong> {{ course.date|date:'Y-m-d' }}</p>
        <p><strong>Time:</strong> {{ course.time|time:'H:i' }}</p>
        <p><strong>Instructor:</strong> {{ course.instructor }}</p>
        <p><strong>Location:</strong> {{ course.location }}</p>
        <p><strong>Available Slots:</strong> {{ course.remaining_slots }}</p>
        <form method="post" action="{% url 'book_class' course.id %}">
            {% csrf_token %}
            <button type="submit" style="margin-top: 10px; padding: 8px 24px; font-size: 1em; border-radius: 8px; border: 2px solid #333; background: #fff; cursor: pointer;">Book</button>
        </form>
    </div>
    {% endfor %}
</div>
{% endblock %}
